#####################################################################################
###################            Глобальные переменные                #################
#####################################################################################

global "_ФОРМА_ПО_ФАКТУ,_ОСНОВНАЯ_ФОРМА,_ФОРМА_ДЛЯ_СТРОЕК": "A"
global _СВОДНЫЙ_ОТЧЕТ_ПО_ФАКТУ : "Aa"
global _ОТЧЕТ_ПРЕДПРИЯТИЯ_ПО_ФАКТУ : "Ab"

global _ФОРМА_ПО_ПЛАНУ : "B"
global _СВОДНЫЙ_ОТЧЕТ_ПО_ПЛАНУ : "Ba"
global _ОТЧЕТ_ПРЕДПРИЯТИЯ_ПО_ПЛАНУ : "Bb"

global _ФОРМА_ПО_КОРРЕКТИВУ : "C"
global _СВОДНЫЙ_ОТЧЕТ_ПО_КОРРЕКТИВУ : "Ca"
global _ОТЧЕТ_ПРЕДПРИЯТИЯ_ПО_КОРРЕКТИВУ : "Cb"


#####################################################################################
###################                Абстрактные темы                 #################
#####################################################################################

#====================================================================================
#Тема для обозначения тем в разработке
#------------------------------------------------------------------------------------
thema fordesign, "Для дизайна", active=false:
	role = "DESIGNER,TESTER"
	needresponsibility=false
	scheduleA=""
	ignoreperiodstateA=true
	ignoreperiodstateB=true
	ignoreperiodstateC=true
	
#====================================================================================
#Тема для обозначения тем в разработке (с доступом предприятий)
#------------------------------------------------------------------------------------
thema forprdtest, "Для тестирования предприятиями", active=false:
	needresponsibility=false
	scheduleA=""
	ignoreperiodstateA=true
	ignoreperiodstateB=true
	ignoreperiodstateC=true
	

#====================================================================================
#Тема для квартальных отчетов
#------------------------------------------------------------------------------------
thema kvart, "Квартальные темы", abst:
	iskvart = true
	forperiodsA="1,2,3,4,11,12,13,14,15,16,17,18,19,110,111,112,403,406,409"
	periodredirectA="""
	PR_KVART:11=1,12=1,13=1,14=2,15=2,16=2,17=3,18=3,19=3,110=4,111=4,112=4,251=-99,252=-99,253=-99,254=-99,303=-99,306=-99,309=-99,301=-99
	|
	:11=1,12=1,13=1,14=2,15=2,16=2,17=3,18=3,19=3,110=4,111=4,112=4,251=-99,252=-99,253=-99,254=-99,303=-99,306=-99,309=-99,301=-99
	"""

#====================================================================================
#Месячные темы для предприятий с квартальной отчетностью
#------------------------------------------------------------------------------------
thema month_for_kvart, "Месячные темы для предприятий с квартальной отчетностью", abst:
	periodredirectA=":251=-99,252=-99,253=-99,254=-99,303=-99,306=-99,309=-99,301=-99"

#====================================================================================
#Абстрактная тема для экономических форм 
#------------------------------------------------------------------------------------
subset cs_plan_form_1 :
	substitution
subset cs_plan_report_1:
	substitution
subset cs_korr_form_1 :
	substitution
subset cs_korr_report_1 :
	substitution
	
subset cs_check_valuta :
	col Б1, "Исходная {2} {0}", group="CHECKVALUTA", valuta="NONE" 
	col Б1, "Рубль {2} {0}", group="CHECKVALUTA", valuta="RUB"
	col Б1, "Доллар {2} {0}", group="CHECKVALUTA", valuta="USD"
	col Б1, "Евро {2} {0}", group="CHECKVALUTA", valuta="EUR"
	col Б1, customCode="rubc","Курс к рублю", group="CHECKVALUTA", formulatype=boo, formula = "@Б1.tovaluta('RUB')? / @Б1.tovaluta('NONE')?" , format="0.#####"
	col Б1, customCode="usdc","Курс к доллару", group="CHECKVALUTA", formulatype=boo, formula = "@Б1.tovaluta('USD')? / @Б1.tovaluta('NONE')?" , format="0.#####"
	col Б1, customCode="eurc", "Курс к евро", group="CHECKVALUTA", formulatype=boo, formula = "@Б1.tovaluta('EUR')?  / @Б1.tovaluta('NONE')?", format="0.#####"
	col Б1, customCode="rrubc","Курс к рублю (обр)", group="CHECKVALUTA", formulatype=boo, formula = " @Б1.tovaluta('NONE')? / @Б1.tovaluta('RUB')? " , format="0.#####"
	col Б1, customCode="rusdc","Курс к доллару (обр)", group="CHECKVALUTA", formulatype=boo, formula = "@Б1.tovaluta('NONE')? / @Б1.tovaluta('USD')?" , format="0.#####"
	col Б1, customCode="reurc", "Курс к евро (обр)", group="CHECKVALUTA", formulatype=boo, formula = "@Б1.tovaluta('NONE')?  / @Б1.tovaluta('EUR')?", format="0.#####"
	
thema assoilib, visible=false :
	out Aa :
		useset svod_params
		embed  : "objset[@id='default_svod']/*"
		useset cs_check_valuta
	out Ab :
		useset org_params
		embed  : "objset[@id='current_obj']/*"
		useset cs_check_valuta
	out DEFAULTPLAN :
		use usekvkurs
#		ask showcontrolpoints
		ask usepredsng
		ask kolgod6
		ask summayear
		ask planfact
		ask useplanpred
		ask usekorrtpfp : false
		ask showkorrtpfp : true
		ask kolplan
		ask useotkl
		ask useozhidcalc
		ask usekvplan : false
		ask offline_data : true
		ask usealias
		useset cs_plan_report_1
		useset cs_check_valuta
	out DEFAULTKORR :
		use usekvkurs
#		ask showcontrolpoints
		use name_width : 400
		param periodstring : "ТПФП 2011"
		useset cs_korr_report_1
		useset cs_check_valuta
	form DEFAULTPLAN :
		useset cs_plan_form_1
	form DEFAULTKORR :
		useset cs_korr_form_1
		col PLANCSNG, "Сумма годовых корр-вов {0}", matrixformula="KORR31,KORR32,KORR33", matrixformulatype="sum", forperiods="33", formula=" @PLANC.P31? + @PLANC.P32? + @PLANC.P33? ", fixed, format=_INT
		col PLANCSNG1, "в т.ч. на I кв {0}", matrixformula="KORR311,KORR321,KORR331", matrixformulatype="sum", forperiods="33", formula=" @PLANC.P311? + @PLANC.P321? + @PLANC.P331? ", fixed, format=_INT
		col PLANCSNG2, "в т.ч. на II кв {0}", matrixformula="KORR312,KORR322,KORR332", matrixformulatype="sum", forperiods="33", formula=" @PLANC.P312? + @PLANC.P322? + @PLANC.P332? ", fixed, format=_INT
		col PLANCSNG3, "в т.ч. на III кв {0}", matrixformula="KORR313,KORR323,KORR333", matrixformulatype="sum", forperiods="33", formula=" @PLANC.P313? + @PLANC.P323? + @PLANC.P333? ", fixed, format=_INT
		col PLANCSNG4, "в т.ч. на IV кв {0}", matrixformula="KORR314,KORR324,KORR334", matrixformulatype="sum", forperiods="33", formula=" @PLANC.P314? + @PLANC.P324? + @PLANC.P334? ", fixed, format=_INT
		
#====================================================================================
#Базовая тема для стандартных форм ввода и отчетности
#------------------------------------------------------------------------------------
thema assoieco, "ЭКО для АССОИ", abst :
	# состоит из 3-х групп ФАКТ, ПЛАН и КОРРЕКТИВ
	import subecoA # Факт
	import subecoB # План
	import subecoC # План корректив
	layout=eco
	defaultelementrole=DEFAULT
	classname="Comdiv.Zeta.Web.Themas.EcoThema, Comdiv.Zeta.Web"
	roleprefix=""
	doc summary, type="text",value="${summary}"
	
	#должна быть указана корневая строка дерева
	rootrow=""
	#возможна настройка альтернативной плановой строки
	planrow="${rootrow}"
	#предполагается наличие ответственного
	needresponsibility=true
	
	formnameA="${name} (факт)"
	rowA = "${rootrow}"
	lockA = "s${rowA}"
	
	#---------------------------------------------------------------------
	#Подключение библиотек
	f_libA = ""
	f_libB = "assoilibDEFAULTPLAN"
	f_libC = "assoilibDEFAULTKORR"
	
	ra_libA = "assoilibAa"
	ra_libB = "${ra_libA}"
	ra_libC = "${ra_libA}"
	rb_libA = "assoilibAb"
	rb_libB = "${rb_libA}"
	rb_libC = "${rb_libA}"
	
	ra_lib2A = ""
	ra_lib2B = "assoilibDEFAULTPLAN"
	ra_lib2C = "assoilibDEFAULTKORR"
	rb_lib2A = ""
	rb_lib2B = "assoilibDEFAULTPLAN"
	rb_lib2C = "assoilibDEFAULTKORR"
	
	biztran = ""
	biztranA  = "${biztran}"
	biztranB  = "${biztran}"
	biztranC  = "${biztran}"
	#---------------------------------------------------------------------
	#Группа настройки ввода-вывода факта
	
	
	
	forperiodsA="1,2,3,4,11,12,13,14,15,16,17,18,19,110,111,112,403,406,409"
	periodredirectA="PR_KVART:11=1,12=1,13=1,14=2,15=2,16=2,17=3,18=3,19=3,110=4,111=4,112=4|:251=-99,252=-99,253=-99,254=-99,303=-99,306=-99,309=-99,301=-99"
	autofillA="11,12,13,14,15,16,17,18,19,110,111,112,403,406,409,1,2,3,4|sql:DEFAULT" 
	scheduleA="Comdiv.Zeta.Web.InputTemplates.EndtimeScheduleChecker, Comdiv.Zeta.Web" 
	scheduledeltaA="30"
	report_a_objsetA = ""
	
	formset _ФОРМА_ПО_ФАКТУ :
		NULL #по умолчанию пусто
	reportset _СВОДНЫЙ_ОТЧЕТ_ПО_ФАКТУ :
		NULL #по умолчанию пусто
	reportset _ОТЧЕТ_ПРЕДПРИЯТИЯ_ПО_ФАКТУ :
		NULL #по умолчанию пусто
		
	#---------------------------------------------------------------------
	#Группа настройки ввода-вывода плана
	formnameB="${name} (план)"
	rowB = "${planrow}"
	lockB = "s${rowB}p"
	fordetailB = "${fordetailA}"
	forperiodsB="301,251,252,253,254,303,306,309"
#	periodredirectB="""
#	 :11=251,12=251,13=251,14=252,15=252,16=252,17=253,18=253,19=253,110=254,111=254,112=254,1=251,2=252,3=253,4=254|
#	 PR_KVART:11=251,12=251,13=251,14=252,15=252,16=252,17=253,18=253,19=253,110=254,111=254,112=254,1=251,2=252,3=253,4=254|
#	"""
	periodredirectB="""
	 :11=303,12=303,13=303,14=306,15=306,16=306,17=309,18=309,19=309,110=254,111=254,112=254,1=303,2=306,3=309,4=254|
	 PR_KVART:11=303,12=303,13=303,14=306,15=306,16=306,17=309,18=309,19=309,110=254,111=254,112=254,1=303,2=306,3=309,4=254|
	"""
	autofillB="251,252,253,254|sql:DEFAULT" 
	form_roleB = "_POPERATOR"
	form_lockroleB = "_PUNDERWRITER"
	report_a_roleB = "_PANALYTIC"
	form_roleC = "${form_roleB}"
	form_lockroleC = "${form_lockroleB}"
	report_a_roleC = "${report_a_roleB}"
	isdetail="${fordetailA}"
		
	#---------------------------------------------------------------------
	#Группа настройки ввода-вывода корректива
	formnameC="${name} (корректив годового ТПФП)"
	rowC = "${planrow}"
	lockC = "s${rowC}pc"
	forperiodsC="31,32,33,34"
	fordetailC = "${fordetailB}"
	periodredirectC="""
	 :11=31,12=31,13=31,14=32,15=32,16=32,17=33,18=33,19=33,110=34,111=34,112=34,1=31,2=32,3=33,4=34|
	 PR_KVART:11=31,12=31,13=31,14=32,15=32,16=32,17=33,18=33,19=33,110=34,111=34,112=34,1=31,2=32,3=33,4=34|
	"""	

#====================================================================================
#Базовая тема для стандартных форм ввода и отчетности
#------------------------------------------------------------------------------------
thema history, "ЭКО для АССОИ", abst :
	# состоит из 1-й группы ФАКТ
	import subecoA # Факт
	layout=eco
	defaultelementrole=DEFAULT
	classname="Comdiv.Zeta.Web.Themas.EcoThema, Comdiv.Zeta.Web"
	roleprefix=""
	doc summary, type="text",value="${summary}"
	
	#должна быть указана корневая строка дерева
	rootrow=""
	
	#---------------------------------------------------------------------
	#Группа настройки ввода-вывода факта
	formnameA="${name} (факт)"
	rowA = "${rootrow}"
	lockA = "s${rowA}"
	
	f_libA = ""
	ra_libA = ""
	rb_libA = ""
	ra_lib2A = ""
	rb_lib2A = ""
	
	forperiodsA="4"
	periodredirectA="11=4,12=4,13=4,14=4,15=4,16=4,17=4,18=4,19=4,110=4,111=4,112=4,1=4,2=4,3=4"
	autofillA="4|sql:DEFAULT" 
	scheduleA="Comdiv.Zeta.Web.InputTemplates.EndtimeScheduleChecker, Comdiv.Zeta.Web" 
	scheduledeltaA="90"
	report_a_objsetA = ""
	
	formset _ФОРМА_ПО_ФАКТУ :
		NULL #по умолчанию пусто
	reportset _СВОДНЫЙ_ОТЧЕТ_ПО_ФАКТУ :
		NULL #по умолчанию пусто
	reportset _ОТЧЕТ_ПРЕДПРИЯТИЯ_ПО_ФАКТУ :
		NULL #по умолчанию пусто

		
#====================================================================================
#Единичный отчет в АССОИ 
#------------------------------------------------------------------------------------
thema assoireport, "Единичный отчет в АССОИ",abst=true :
	import assoieco
	activeB = false
	activeC = false
	factiveA = false
	f_visibleA = false
	fl_visibleA = false
	rb_visibleA = false
	needresponsibility = false
	scheduleA = ""



















































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































